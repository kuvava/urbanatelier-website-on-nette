{ifset $myLorry->menu}
{if $myLorry->menu->count() > 0}

{var $level = -1}
{var $smazaneLftRgt = array()}
{var $i = 0}
{foreach $myLorry->menu as $row}{if $row->ref('url')->hidden > 0}{var $smazaneLftRgt[$i]['lft'] = $row->lft}{var $smazaneLftRgt[$i]['rgt'] = $row->rgt}{? $i++}{else}{var $bool = TRUE}{foreach $smazaneLftRgt as $keKontrole}{if ($keKontrole['lft'] <= $row->lft) && ($keKontrole['rgt'] >= $row->rgt)}{var $bool = FALSE}{/if}{breakIf !$bool}{/foreach}{if $bool}{var $link = $row->ref('url')->ref('presenter')->name . ':zobraz'}{if $level < $row->level}<menu id="m{$row->level}">{else}{block |repeat:$level - $row->level}</li></menu>{/block}</li>{/if}<li><a n:href="$link, url1 => $row->ref('url')->url1, url2 => $row->ref('url')->url2" {var $temp = NULL}{var $temp = trim(trim($row->special_link_title) === '' ? $row->ref('url')->link_title : $row->special_link_title)}{if !($temp === NULL || $temp ==='')}title="{$temp}"{/if}><div n:class="in_array($row->id, $myLorry->menuAct) ? act">{trim($row->special_text) === '' ? $row->ref('url')->menu_text : $row->special_text}</div></a>{var $level = $row->level}{/if}{/if}{/foreach}{block |repeat:$level + 1}</li></menu>{/block}

{/if}
{/ifset}